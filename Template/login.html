<?php
  if( !empty($_POST) ){
    $sql = New Sql();

    if($_POST["formType"] == 'signUp'){
       $user = ['email' => $_POST["sign_up_email"],
               'password' => $_POST["sign_up_password"],
               'name' => $_POST["sign_up_name"],
               'type' => 'client',
               'phone' => $_POST["sign_up_phone"],
               'address' => $_POST["sign_up_address"],
               'city' => $_POST["sign_up_city"],
               'state' => $_POST["sign_up_state"],
               'zip' => $_POST["sign_up_zip"]
               ];
      $sql->insertItem('userArray', $user);
      echo '<script>window.location.href = "/";</script>';
    }

    if($_POST["formType"] == 'signIn'){
      $data = $sql->getItem('userArray', $_POST["sign_in_email"] );
      if( !empty($data) && $data["password"] == $_POST['sign_in_password'] ){
        echo '<script>window.location.href = "/";</script>';
      }
      else if( !empty($data) && $data["password"] != $_POST['sign_in_password'] ){
        echo '<script>
              $( document ).ready(function() {
                var text = "<span>User Not Found Or Incorrect Password</span>";
                    text += "<span>Please double Check and try again</span>";
                $("#formSignIn h2").append(text);
              });
              </script>';
      }
    }
  }
?>

<div id="" class="section">
  <div class="constraint" style="">
    <div id="" class="column width-12">
      <form action="" method="post" id="signInForm">
        <input type="radio" id="signIn" name="formType" value="signIn" checked="checked">
        <label for="signIn">Existing User</label>
        <input type="radio" id="signUp" name="formType" value="signUp">
        <label for="signUp">New User</label>
        <div id="formSignIn" class="customForm">
          <h2>SIGN IN</h2>
          <div>
            <label for="signInEmail"><b>Email</b></label>
            <input id="signInEmail" type="text" placeholder="" name="sign_in_email" required>
          </div>
          <div>
            <label for="signInpsw"><b>Password</b></label>
            <input id="signInpsw" type="password" placeholder="" name="sign_in_password" required>
          </div>
        </div>
        <div id="formSignUp" class="customForm">
          <h2>CREATE AN ACCOUNT</h2>
          <div>
            <label for="signUpEmail"><b>Email</b></label>
            <input id="signUpEmail" type="text" placeholder="" name="sign_up_email">
          </div>
          <div>
            <label for="signUpPsw"><b>Password</b></label>
            <input id="signUpPsw" type="password" placeholder="" name="sign_up_password">
          </div>
          <div>
            <label for="signUpName"><b>Name</b></label>
            <input id="signUpName" type="text" placeholder="" name="sign_up_name">
          </div>
          <div>
            <label for="signUpPhone"><b>Phone</b></label>
            <input id="signUpPhone" type="text" placeholder="" name="sign_up_phone">
          </div>
          <div>
            <label for="signUpAddress"><b>Address</b></label>
            <input id="signUpAddress" type="text" placeholder="" name="sign_up_address">
          </div>
          <div>
            <label for="signUpCity"><b>City</b></label>
            <input id="signUpCity" type="text" placeholder="" name="sign_up_city">
          </div>
          <div>
            <label for="signUpState"><b>State</b></label>
            <select id="signUpState" name="sign_up_state">
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District Of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
          <div>
            <label for="signUpZip"><b>Zip</b></label>
            <input id="signUpZip" type="text" placeholder="" name="sign_up_zip">
          </div>
        </div>
        <input class="button" type="submit" value="Submit">
      </form>
    </div>
  </div>
</div>
